<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<script src="https://code.jquery.com/jquery-1.12.4.js"></script>
<style>
	
	#memberlist{
		overflow: hidden;
	}

	div.card {
		width : 33%;
		float : left;
		
		border: 1px solid #DDD;
	}
	
	div.card>ul>li {
		list-style: none;
		font-size: 12px;
	}
</style>
</head>
<body>

 	<h1>회원리스트</h1>
	<hr>
	<h1>회원 가입 </h1>
	<form id="regForm" onsubmit="return false">
		<input type="email" name="email" id="email"> <br>
		<input type="password" name="pw" id="pw"><br>
		<input type="text" name="name" id="name"><br>
		<input type="file" name="photo" id="photo"><br>
		<input type="submit" value="회원가입" onclick="regSubmit();"><br>
	</form>
	<hr>
	<div id="memberlist"></div>
	
	<script>
	$(document).ready(function(){
		
		memberlist();
		
	});
	
	
	function regSubmit(){
		$.ajax({
			url : 'http://localhost:8080/member/members',
			type : 'post',
			data : {
				email : $('#email').val(),
				pw : $('#pw').val(),
				name : $('#name').val()
			},
			success : function(data){
				alert(data);
			}
		});		
		
	}
	
	function memberlist() {
		$.ajax({
			url : 'http://localhost:8080/member/members',
			type : 'get',
			success : function(data){
				/* alert(JSON.stringify(data)); */
				//$('#memberlist').html(JSON.stringify(data));
				
				var html='';
				for(var i=0; i<data.length; i++) {
					html+='<div class="card">';
					html+='<ul>';
					html+='		<li>idx : '+data[i].idx+'</li>';
					html+='		<li>Email : '+data[i].email+'</li>';
					html+='		<li>Name : '+data[i].name+'</li>';
					html+='		<li>Regdate : '+data[i].regdate+'</li>';
					html+='		<li>Photo : '+data[i].photoPath+'</li>';
					html+='		<li><input type="button" value="수정"><input type="button" value="삭제"></li>';
					html+='</ul>';
					html+='</div>';
				}
				$('#memberlist').html(html);
			} 
		});
		
	}
	
	
	
	</script>
	
	
	
</body>
</html>